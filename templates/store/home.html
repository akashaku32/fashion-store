{% extends 'base.html' %}
{% load static %}

{% block title %}Luna & Lace - Modern Women's Fashion{% endblock %}

{% block extra_css %}
<style>
/* Uptownie-inspired Homepage Styles */
.hero-section {
    background: 
        linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(220, 53, 69, 0.1) 50%, rgba(156, 39, 176, 0.1) 100%), 
        linear-gradient(45deg, rgba(255, 255, 255, 0.1) 0%, rgba(248, 249, 250, 0.2) 100%),
        url('https://images.unsplash.com/photo-1583391733956-6c78276477e1?w=1920&h=1080&fit=crop&auto=format&q=80') center/cover;
    background-attachment: fixed;
    padding: 6rem 0 4rem;
    position: relative;
    overflow: hidden;
    min-height: 80vh;
    display: flex;
    align-items: center;
}

/* Kerala Traditional Fashion Background Gallery */
.kerala-fashion-gallery {
    position: relative;
    height: 70vh;
    overflow: hidden;
    background: #000;
}

.kerala-fashion-gallery .gallery-slides {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
}

.kerala-fashion-gallery .slide {
    min-width: 100%;
    height: 100%;
    position: relative;
    opacity: 0;
    transition: opacity 2s ease-in-out;
}

.kerala-fashion-gallery .slide.active {
    opacity: 1;
}

.kerala-fashion-gallery .slide::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg,
        rgba(255, 215, 0, 0.2) 0%,
        rgba(220, 53, 69, 0.2) 30%,
        rgba(156, 39, 176, 0.2) 60%,
        rgba(76, 175, 80, 0.2) 100%);
    z-index: 2;
}

.kerala-fashion-gallery .slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(0.7) contrast(1.1);
}

.kerala-fashion-gallery .slide-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: white;
    z-index: 3;
    max-width: 600px;
    padding: 2rem;
}

.kerala-fashion-gallery .slide-content h2 {
    font-size: 3.5rem;
    font-weight: 800;
    margin-bottom: 1rem;
    text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.8);
    background: linear-gradient(135deg, #ffd700, #fff, #ffd700);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: textGlow 3s ease-in-out infinite alternate;
}

@keyframes textGlow {
    from { filter: brightness(1) drop-shadow(0 0 5px rgba(255, 215, 0, 0.5)); }
    to { filter: brightness(1.2) drop-shadow(0 0 20px rgba(255, 215, 0, 0.8)); }
}

.kerala-fashion-gallery .slide-content p {
    font-size: 1.4rem;
    margin-bottom: 2rem;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    opacity: 0.9;
}

.kerala-fashion-gallery .gallery-dots {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 15px;
    z-index: 4;
}

.kerala-fashion-gallery .dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    border: 2px solid rgba(255, 215, 0, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
}

.kerala-fashion-gallery .dot.active {
    background: #ffd700;
    border-color: #fff;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
    transform: scale(1.2);
}

.kerala-fashion-gallery .slide-navigation {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    z-index: 4;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.kerala-fashion-gallery .slide-navigation:hover {
    background: rgba(255, 215, 0, 0.3);
    transform: translateY(-50%) scale(1.1);
}

.kerala-fashion-gallery .prev-slide {
    left: 30px;
}

.kerala-fashion-gallery .next-slide {
    right: 30px;
}

@media (max-width: 768px) {
    .kerala-fashion-gallery {
        height: 60vh;
    }

    .kerala-fashion-gallery .slide-content h2 {
        font-size: 2.5rem;
    }

    .kerala-fashion-gallery .slide-content p {
        font-size: 1.1rem;
    }

    .kerala-fashion-gallery .slide-navigation {
        width: 40px;
        height: 40px;
        font-size: 1.2rem;
    }

    .kerala-fashion-gallery .prev-slide {
        left: 15px;
    }

    .kerala-fashion-gallery .next-slide {
        right: 15px;
    }
}

@media (max-width: 480px) {
    .kerala-fashion-gallery {
        height: 50vh;
    }

    .kerala-fashion-gallery .slide-content h2 {
        font-size: 2rem;
    }

    .kerala-fashion-gallery .slide-content p {
        font-size: 1rem;
    }
}

.hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50 5L60 35L90 35L70 55L80 85L50 65L20 85L30 55L10 35L40 35Z" fill="%23ffd70020"/></svg>') repeat,
        radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(220, 53, 69, 0.1) 0%, transparent 50%);
    background-size: 50px 50px, 300px 300px, 300px 300px;
    animation: floatingPattern 20s linear infinite;
    opacity: 0.3;
    z-index: 1;
}

@keyframes floatingPattern {
    0% { transform: translateX(0) translateY(0); }
    25% { transform: translateX(20px) translateY(-10px); }
    50% { transform: translateX(-10px) translateY(-20px); }
    75% { transform: translateX(-20px) translateY(10px); }
    100% { transform: translateX(0) translateY(0); }
}

@media (max-width: 768px) {
    .hero-section {
        padding: 4rem 0 3rem;
        min-height: 60vh;
    }
}

@media (max-width: 480px) {
    .hero-section {
        padding: 3rem 0 2rem;
        min-height: 50vh;
    }
}

.hero-content {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
}

.hero-title {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 4rem;
    font-weight: 800;
    font-style: italic;
    color: #ffffff;
    margin-bottom: 1.5rem;
    letter-spacing: 0.02em;
    line-height: 1.2;
    text-shadow: 3px 3px 12px rgba(0, 0, 0, 0.9), 
                 0 0 25px rgba(0, 0, 0, 0.7),
                 0 0 40px rgba(0, 0, 0, 0.4);
    filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.8));
}

@media (max-width: 768px) {
    .hero-title {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }
}

@media (max-width: 480px) {
    .hero-title {
        font-size: 2rem;
        margin-bottom: 0.75rem;
        line-height: 1.1;
    }
}

.hero-subtitle {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: 1.4rem;
    font-style: italic;
    color: #ffffff;
    margin-bottom: 2.5rem;
    font-weight: 500;
    line-height: 1.6;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9), 
                 0 0 20px rgba(0, 0, 0, 0.7),
                 0 0 30px rgba(0, 0, 0, 0.4);
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.8));
}

@media (max-width: 768px) {
    .hero-subtitle {
        font-size: 1.2rem;
        margin-bottom: 2rem;
    }
}

@media (max-width: 480px) {
    .hero-subtitle {
        font-size: 1rem;
        margin-bottom: 1.5rem;
        line-height: 1.4;
    }
}

.hero-cta {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
}

@media (max-width: 480px) {
    .hero-cta {
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
    }
    
    .hero-cta .btn {
        width: 100%;
        max-width: 250px;
        padding: 1rem 2rem;
        font-size: 1rem;
    }
}

.cta-button {
    padding: 1rem 2rem;
    border-radius: 50px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    font-size: 1rem;
}

.cta-primary {
    background: var(--gradient-primary);
    color: white;
    border: none;
}

.cta-primary:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-soft);
    color: white;
}

.cta-secondary {
    background: transparent;
    color: var(--text-color);
    border: 2px solid var(--border-color);
}

.cta-secondary:hover {
    background: var(--light-gray);
    border-color: var(--primary-color);
    color: var(--primary-color);
}

/* Sale Banner */
.sale-banner {
    background: var(--gradient-primary);
    color: white;
    text-align: center;
    padding: 1rem 0;
    font-weight: 600;
    font-size: 0.95rem;
}

/* Categories Section */
.categories-section {
    padding: 4rem 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.6) 0%, rgba(248, 249, 250, 0.6) 100%), 
                url('https://images.unsplash.com/photo-1469334031218-e382a71b716b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&h=1080&q=80') center/cover;
    position: relative;
}

.section-title {
    text-align: center;
    margin-bottom: 3rem;
}

.section-title h2 {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 2.8rem;
    font-weight: 700;
    font-style: italic;
    color: #ffffff;
    margin-bottom: 1rem;
    letter-spacing: 0.02em;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7), 0 0 20px rgba(0, 0, 0, 0.5);
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.6));
}

.section-title p {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: 1.2rem;
    font-style: italic;
    color: #ffffff;
    max-width: 600px;
    margin: 0 auto;
    font-weight: 500;
    text-shadow: 1px 1px 6px rgba(0, 0, 0, 0.8), 0 0 15px rgba(0, 0, 0, 0.6);
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.7));
}

.categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.category-card {
    position: relative;
    border-radius: 16px;
    overflow: hidden;
    height: 400px;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow);
    background: white;
}

.category-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
}

.category-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s ease;
}

.category-card:hover .category-image {
    transform: scale(1.05);
}

.category-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0,0,0,0.7));
    color: white;
    padding: 2rem 1.5rem 1.5rem;
    text-align: center;
}

.category-name {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 1.6rem;
    font-weight: 600;
    font-style: italic;
    margin-bottom: 0.5rem;
}

.category-count {
    font-size: 0.9rem;
    opacity: 0.9;
}

/* Featured Products Section */
.featured-section {
    padding: 4rem 0;
    background: 
        linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(76, 175, 80, 0.1) 25%, rgba(233, 30, 99, 0.1) 50%, rgba(63, 81, 181, 0.1) 75%, rgba(255, 152, 0, 0.1) 100%),
        url('https://images.unsplash.com/photo-1583391733956-6c78276477e1?w=1920&h=1080&fit=crop&auto=format&q=80') center/cover;
    background-attachment: fixed;
    position: relative;
    overflow: hidden;
}

.featured-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="%23ffd70030"/><circle cx="80" cy="30" r="3" fill="%234caf5030"/><circle cx="60" cy="70" r="2" fill="%23e91e6330"/><circle cx="30" cy="80" r="3" fill="%233f51b530"/></svg>') repeat,
        radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 30%),
        radial-gradient(circle at 90% 80%, rgba(76, 175, 80, 0.1) 0%, transparent 30%),
        radial-gradient(circle at 50% 50%, rgba(233, 30, 99, 0.1) 0%, transparent 30%);
    background-size: 80px 80px, 400px 400px, 400px 400px, 400px 400px;
    animation: culturalPattern 25s linear infinite;
    opacity: 0.4;
    z-index: 1;
}

@keyframes culturalPattern {
    0% { transform: translateX(0) translateY(0) rotate(0deg); }
    25% { transform: translateX(30px) translateY(-20px) rotate(90deg); }
    50% { transform: translateX(-20px) translateY(-30px) rotate(180deg); }
    75% { transform: translateX(-30px) translateY(20px) rotate(270deg); }
    100% { transform: translateX(0) translateY(0) rotate(360deg); }
}

.featured-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.featured-product-card {
    background: white;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: var(--shadow);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

.featured-product-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
}

.product-image-container {
    position: relative;
    height: 300px;
    overflow: hidden;
}

.product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s ease;
}

.featured-product-card:hover .product-image {
    transform: scale(1.05);
}

.product-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 107, 157, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    opacity: 0;
    transition: all 0.3s ease;
}

.featured-product-card:hover .product-overlay {
    opacity: 1;
}

.overlay-btn {
    width: 50px;
    height: 50px;
    border: none;
    border-radius: 50%;
    background: white;
    color: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1.2rem;
}

.overlay-btn:hover {
    transform: scale(1.1);
    background: var(--primary-color);
    color: white;
}

.product-content {
    padding: 1.5rem;
}

.product-title {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 1.2rem;
    font-weight: 600;
    font-style: italic;
    color: var(--dark-color);
    margin-bottom: 0.5rem;
    line-height: 1.3;
}

.product-price {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 1rem;
}

.discount-price {
    color: var(--text-muted);
    text-decoration: line-through;
    font-size: 1rem;
    margin-left: 0.5rem;
}

.product-actions {
    display: flex;
    gap: 0.5rem;
}

.action-btn {
    flex: 1;
    padding: 0.75rem;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    background: white;
    color: var(--text-color);
    text-decoration: none;
    text-align: center;
    font-weight: 600;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

.action-btn:hover {
    border-color: var(--primary-color);
    background: var(--primary-color);
    color: white;
    transform: translateY(-2px);
}

.action-btn.primary {
    background: var(--gradient-primary);
    color: white;
    border-color: transparent;
}

.action-btn.primary:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-soft);
}

/* Newsletter Section */
.newsletter-section {
    padding: 4rem 0;
    background: var(--gradient-primary);
    color: white;
    text-align: center;
}

.newsletter-content h2 {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: 2.8rem;
    font-weight: 700;
    font-style: italic;
    margin-bottom: 1rem;
    letter-spacing: 0.02em;
}

.newsletter-content p {
    font-family: 'Cormorant Garamond', Georgia, serif;
    font-size: 1.2rem;
    font-style: italic;
    opacity: 0.9;
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    font-weight: 500;
}

.newsletter-form {
    max-width: 500px;
    margin: 0 auto;
    display: flex;
    gap: 1rem;
    background: white;
    padding: 0.5rem;
    border-radius: 50px;
}

.newsletter-input {
    flex: 1;
    padding: 1rem 1.5rem;
    border: none;
    border-radius: 50px;
    font-size: 1rem;
    background: transparent;
    color: var(--text-color);
}

.newsletter-input:focus {
    outline: none;
}

.newsletter-input::placeholder {
    color: var(--text-muted);
}

.newsletter-btn {
    padding: 1rem 2rem;
    background: var(--gradient-primary);
    color: white;
    border: none;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.newsletter-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-soft);
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2.5rem;
    }
    
    .hero-cta {
        flex-direction: column;
        align-items: center;
    }
    
    .categories-grid,
    .featured-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .newsletter-form {
        flex-direction: column;
        border-radius: 16px;
    }
    
    .newsletter-input,
    .newsletter-btn {
        border-radius: 16px;
    }
}
</style>
{% endblock %}

{% block content %}
<!-- Sale Banner -->
<div class="sale-banner">
    <div class="container">
        <span>FLAT 15% OFF on orders above $199 | Code: SUMMER15</span>
    </div>
</div>

<!-- Hero Section -->
<section class="hero-section mobile-section">
    <div class="container">
        <div class="hero-content hero-text">
            <h1 class="hero-title">Discover Your Perfect Style</h1>
            <p class="hero-subtitle">Curated collection of modern, comfortable, and stylish women's fashion that celebrates your individuality</p>
            <div class="hero-cta">
                <a href="{% url 'store:product_list' %}" class="cta-button cta-primary ripple">
                    <i class="fas fa-shopping-bag me-2"></i>Shop Now
                </a>
                <a href="{% url 'store:product_list' %}?category=dresses" class="cta-button cta-secondary ripple">
                    <i class="fas fa-heart me-2"></i>View Dresses
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="categories-section">
    <div class="container">
        <div class="section-title">
            <h2>Shop by Category</h2>
            <p>Explore our carefully curated collections designed for the modern woman</p>
        </div>
        
        <div class="categories-grid">
            {% for category in categories %}
            <div class="category-card" onclick="window.location.href='{% url 'store:product_list' %}?category={{ category.slug }}'">
                {% if category.image_source %}
                <img src="{{ category.image_source }}" alt="{{ category.name }}" class="category-image">
                {% else %}
                <div class="category-image d-flex align-items-center justify-content-center bg-light">
                    <i class="fas fa-image fa-3x text-muted"></i>
                </div>
                {% endif %}
                
                <div class="category-overlay">
                    <h3 class="category-name">{{ category.name }}</h3>
                    <p class="category-count">{{ category.products.count }} items</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Featured Products Section -->
<section class="featured-section mobile-section">
    <div class="container">
        <div class="section-title text-overlay">
            <h2 class="feminine-title">Everyone's Eyeing These</h2>
            <p>Handpicked favorites from our latest collection</p>
        </div>
        
        <div class="featured-grid">
            {% for product in featured_products %}
            <div class="featured-product-card ripple">
                <div class="product-image-container">
                    {% if product.images.first %}
                    <img src="{{ product.images.first.image_source }}" alt="{{ product.name }}" class="product-image">
                    {% else %}
                    <div class="product-image d-flex align-items-center justify-content-center bg-light">
                        <i class="fas fa-image fa-3x text-muted"></i>
                    </div>
                    {% endif %}
                    
                    <div class="product-overlay">
                        <a href="{% url 'store:product_detail' product.slug %}" class="overlay-btn" title="Quick View">
                            <i class="fas fa-eye"></i>
                        </a>
                        <button class="overlay-btn add-to-cart" data-product-id="{{ product.id }}" title="Add to Cart">
                            <i class="fas fa-shopping-cart"></i>
                        </button>
                    </div>
                </div>
                
                <div class="product-content">
                    <h3 class="product-title">{{ product.name }}</h3>
                    <div class="product-price">
                        {% if product.discount_price %}
                        ${{ product.discount_price }}
                        <span class="discount-price">${{ product.price }}</span>
                        {% else %}
                        ${{ product.price }}
                        {% endif %}
                    </div>
                    
                    <div class="product-actions">
                        <a href="{% url 'store:product_detail' product.slug %}" class="action-btn">
                            <i class="fas fa-eye"></i>
                            View
                        </a>
                        <button class="action-btn primary add-to-cart" data-product-id="{{ product.id }}">
                            <i class="fas fa-shopping-cart"></i>
                            Add to Cart
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <a href="{% url 'store:product_list' %}" class="cta-button cta-primary">
                View All Products
            </a>
        </div>
    </div>
</section>

<!-- Kerala Traditional Fashion Gallery -->
<section class="kerala-fashion-gallery">
    <div class="gallery-slides">
        {% for gallery in seasonal_galleries %}
        <div class="slide{% if forloop.first %} active{% endif %}" style="background-image: linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.2) 100%), url('{{ gallery.image_source }}');">
            <img src="{{ gallery.image_source }}" alt="{{ gallery.title }}" loading="lazy">
            <div class="slide-content">
                <h2>{{ gallery.title }}</h2>
                <p>{{ gallery.description }}</p>
                <a href="{% url 'store:product_list' %}?category={{ gallery.style }}" class="btn btn-kerala btn-lg">
                    {% if gallery.style == 'kerala_bridal' %}
                        <i class="fas fa-sparkles me-2"></i>Explore Bridal Collection
                    {% elif gallery.style == 'kerala_traditional' %}
                        <i class="fas fa-star me-2"></i>View Traditional Collection
                    {% elif gallery.style == 'kerala_modern' %}
                        <i class="fas fa-magic me-2"></i>Discover Modern Fusion
                    {% else %}
                        <i class="fas fa-palette me-2"></i>Explore Collection
                    {% endif %}
                </a>
            </div>
        </div>
        {% empty %}
        <!-- Default slides if no seasonal galleries are active -->
        <div class="slide active" style="background-image: linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.2) 100%), url('https://images.unsplash.com/photo-1583391733956-6c78276477e1?w=1920&h=1080&fit=crop&auto=format&q=80');">
            <img src="https://images.unsplash.com/photo-1583391733956-6c78276477e1?w=1920&h=1080&fit=crop&auto=format&q=80" alt="Kerala Bridal Beauty" loading="lazy">
            <div class="slide-content">
                <h2>Traditional Kerala Beauty</h2>
                <p>Experience the timeless elegance of Kerala bridal fashion, where tradition meets contemporary grace</p>
                <a href="{% url 'store:product_list' %}?category=kerala-bridal-sarees" class="btn btn-kerala btn-lg">
                    <i class="fas fa-sparkles me-2"></i>Explore Bridal Collection
                </a>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Navigation Buttons -->
    <button class="slide-navigation prev-slide" onclick="changeSlide(-1)">
        <i class="fas fa-chevron-left"></i>
    </button>
    <button class="slide-navigation next-slide" onclick="changeSlide(1)">
        <i class="fas fa-chevron-right"></i>
    </button>

    <!-- Dots Indicator -->
    <div class="gallery-dots">
        {% for gallery in seasonal_galleries %}
        <span class="dot{% if forloop.first %} active{% endif %}" onclick="goToSlide({{ forloop.counter0 }})"></span>
        {% empty %}
        <span class="dot active" onclick="goToSlide(0)"></span>
        {% endfor %}
    </div>
</section>

<style>
/* Additional gallery animations */
.kerala-fashion-gallery .slide:nth-child(1) { animation-delay: 0s; }
.kerala-fashion-gallery .slide:nth-child(2) { animation-delay: 0.5s; }
.kerala-fashion-gallery .slide:nth-child(3) { animation-delay: 1s; }
.kerala-fashion-gallery .slide:nth-child(4) { animation-delay: 1.5s; }

.kerala-fashion-gallery .slide-content {
    animation: slideInUp 1s ease-out forwards;
    opacity: 0;
}

.kerala-fashion-gallery .slide.active .slide-content {
    animation-delay: 0.5s;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translate(-50%, -30px);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%);
    }
}

/* Smooth slide transitions */
.kerala-fashion-gallery .slide {
    transition: all 1.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.kerala-fashion-gallery .slide:not(.active) {
    transform: scale(1.05);
}
</style>

<script>
// Kerala Fashion Gallery Auto-Slideshow
let currentSlide = 0;
const slides = document.querySelectorAll('.kerala-fashion-gallery .slide');
const dots = document.querySelectorAll('.kerala-fashion-gallery .dot');

function showSlide(index) {
    // Hide all slides
    slides.forEach(slide => slide.classList.remove('active'));
    dots.forEach(dot => dot.classList.remove('active'));

    // Show current slide
    slides[index].classList.add('active');
    dots[index].classList.add('active');

    currentSlide = index;
}

function changeSlide(direction) {
    currentSlide += direction;

    if (currentSlide < 0) {
        currentSlide = slides.length - 1;
    } else if (currentSlide >= slides.length) {
        currentSlide = 0;
    }

    showSlide(currentSlide);
}

function goToSlide(index) {
    showSlide(index);
}

// Auto slideshow
setInterval(() => {
    changeSlide(1);
}, 5000);

// Initialize first slide
document.addEventListener('DOMContentLoaded', function() {
    showSlide(0);
});

// Pause on hover
const gallery = document.querySelector('.kerala-fashion-gallery');
let autoSlideInterval = setInterval(() => changeSlide(1), 5000);

gallery.addEventListener('mouseenter', () => {
    clearInterval(autoSlideInterval);
});

gallery.addEventListener('mouseleave', () => {
    autoSlideInterval = setInterval(() => changeSlide(1), 5000);
});

// Touch/swipe support for mobile
let touchStartX = 0;
let touchEndX = 0;

gallery.addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
});

gallery.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
});

function handleSwipe() {
    const swipeThreshold = 50;
    if (touchEndX < touchStartX - swipeThreshold) {
        changeSlide(1); // Swipe left, go to next
    }
    if (touchEndX > touchStartX + swipeThreshold) {
        changeSlide(-1); // Swipe right, go to previous
    }
}
</script>

<!-- Kerala Wedding Collection Section -->
<section class="kerala-collection mobile-section">
    <div class="container text-center">
        <h2 class="feminine-title mb-4">Kerala Bridal & Wedding Collection</h2>
        <p class="mb-5">Discover the timeless beauty of Kerala's traditional wedding attire - from exquisite Kanchipuram sarees to stunning temple jewelry</p>
        
        <div class="row g-4 mb-5">
            <!-- Kerala Bridal Sarees -->
            <div class="col-md-4">
                <div class="category-card kerala-bridal h-100">
                    <img src="https://images.unsplash.com/photo-1583391733956-6c78276477e1?w=400&h=250&fit=crop&auto=format&q=80" 
                         class="card-img-top" alt="Kerala Bridal Sarees" style="height: 200px; object-fit: cover;">
                    <div class="card-body">
                        <h5 class="card-title">Kerala Bridal Sarees</h5>
                        <p class="card-text">Traditional Kanchipuram and Kasavu sarees with gold borders</p>
                        <a href="{% url 'store:product_list' %}?category=kerala-bridal-sarees" class="btn btn-kerala">
                            <i class="fas fa-sparkles me-2"></i>Shop Now
                        </a>
                        <span class="badge badge-bridal mt-2">New Collection</span>
                    </div>
                </div>
            </div>
            
            <!-- Wedding Lehengas -->
            <div class="col-md-4">
                <div class="category-card kerala-wedding h-100">
                    <img src="https://images.unsplash.com/photo-1594736797933-d0401ba2fe65?w=400&h=250&fit=crop&auto=format&q=80" 
                         class="card-img-top" alt="Wedding Lehengas" style="height: 200px; object-fit: cover;">
                    <div class="card-body">
                        <h5 class="card-title">Bridal Lehengas</h5>
                        <p class="card-text">Royal velvet and silk lehengas with traditional embroidery</p>
                        <a href="{% url 'store:product_list' %}?category=wedding-lehengas" class="btn btn-kerala">
                            <i class="fas fa-crown me-2"></i>Explore
                        </a>
                        <span class="badge badge-kerala mt-2">Premium</span>
                    </div>
                </div>
            </div>
            
            <!-- Traditional Jewelry -->
            <div class="col-md-4">
                <div class="category-card kerala-festive h-100">
                    <img src="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=400&h=250&fit=crop&auto=format&q=80" 
                         class="card-img-top" alt="Kerala Jewelry" style="height: 200px; object-fit: cover;">
                    <div class="card-body">
                        <h5 class="card-title">Temple Jewelry</h5>
                        <p class="card-text">Authentic Kerala temple jewelry and antique gold designs</p>
                        <a href="{% url 'store:product_list' %}?category=kerala-traditional-jewelry" class="btn btn-kerala">
                            <i class="fas fa-gem me-2"></i>Discover
                        </a>
                        <span class="badge badge-festive mt-2">Handcrafted</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Featured Kerala Products -->
        <div class="row g-4">
            <div class="col-md-6">
                <div class="product-card-kerala h-100">
                    <img src="https://images.unsplash.com/photo-1583391733956-6c78276477e1?w=400&h=300&fit=crop&auto=format&q=80" 
                         class="card-img-top" alt="Kanchipuram Bridal Saree" style="height: 250px; object-fit: cover;">
                    <div class="card-body">
                        <h5 class="card-title">Kanchipuram Bridal Saree - Royal Gold</h5>
                        <p class="card-text">Exquisite silk saree with heavy gold zari work and temple border</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="price">₹38,999 <small class="text-muted text-decoration-line-through">₹45,999</small></div>
                            <button class="btn btn-kerala btn-sm add-to-cart" data-product-id="13">
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="product-card-kerala h-100">
                    <img src="https://images.unsplash.com/photo-1594736797933-d0401ba2fe65?w=400&h=300&fit=crop&auto=format&q=80" 
                         class="card-img-top" alt="Royal Velvet Lehenga" style="height: 250px; object-fit: cover;">
                    <div class="card-body">
                        <h5 class="card-title">Royal Velvet Bridal Lehenga</h5>
                        <p class="card-text">Stunning velvet lehenga with Kerala motifs and sequin work</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="price">₹55,999 <small class="text-muted text-decoration-line-through">₹65,999</small></div>
                            <button class="btn btn-kerala btn-sm add-to-cart" data-product-id="14">
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-5">
            <a href="{% url 'store:product_list' %}" class="cta-button cta-primary">
                <i class="fas fa-star me-2"></i>View Complete Kerala Collection
            </a>
        </div>
    </div>
</section>

<!-- Diverse Cultural Fashion Section -->
<section class="cultural-fashion-section mobile-section" style="
    background: 
        linear-gradient(45deg, rgba(255, 193, 7, 0.1) 0%, rgba(156, 39, 176, 0.1) 25%, rgba(76, 175, 80, 0.1) 50%, rgba(244, 67, 54, 0.1) 75%, rgba(33, 150, 243, 0.1) 100%),
        url('https://images.unsplash.com/photo-1594736797933-d0401ba2fe65?w=1920&h=1080&fit=crop&auto=format&q=80') center/cover;
    background-attachment: fixed;
    padding: 5rem 0;
    position: relative;
    overflow: hidden;
">
    <div style="
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
            url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"><path d=\"M100 20l15 30h35l-25 20 10 30-35-25-35 25 10-30-25-20h35z\" fill=\"%23ff572230\" opacity=\"0.3\"/><circle cx=\"50\" cy=\"150\" r=\"8\" fill=\"%234caf5030\" opacity=\"0.4\"/><circle cx=\"150\" cy=\"150\" r=\"6\" fill=\"%23ffc10730\" opacity=\"0.4\"/></svg>') repeat,
            radial-gradient(circle at 25% 25%, rgba(255, 193, 7, 0.1) 0%, transparent 40%),
            radial-gradient(circle at 75% 75%, rgba(156, 39, 176, 0.1) 0%, transparent 40%);
        background-size: 150px 150px, 500px 500px, 500px 500px;
        animation: culturalDance 30s ease-in-out infinite;
        opacity: 0.6;
        z-index: 1;
    "></div>
    
    <div class="container text-center" style="position: relative; z-index: 2;">
        <div class="text-overlay mb-5">
            <h2 class="feminine-title mb-4" style="color: white; font-size: 3rem;">Beautiful Styles for Every Culture</h2>
            <p class="mb-5" style="color: rgba(255, 255, 255, 0.95); font-size: 1.3rem;">From elegant abayas to traditional Indian wear, from fusion styles to party glamour - celebrate diversity in fashion</p>
        </div>
        
        <div class="row g-4 mb-5">
            <!-- Modest Wear -->
            <div class="col-md-6 col-lg-3">
                <div class="category-card kerala-bridal h-100">
                    <img src="https://images.unsplash.com/photo-1583391733956-6c78276477e1?w=400&h=250&fit=crop&auto=format&q=80" 
                         class="card-img-top" alt="Modest Wear" style="height: 180px; object-fit: cover;">
                    <div class="card-body">
                        <h6 class="card-title">Modest & Elegant</h6>
                        <p class="card-text small">Beautiful abayas, kaftans & modest dresses</p>
                        <a href="{% url 'store:product_list' %}?category=elegant-abayas-and-modest-wear" class="btn btn-kerala btn-sm">
                            <i class="fas fa-moon me-1"></i>Shop
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Traditional Indian -->
            <div class="col-md-6 col-lg-3">
                <div class="category-card kerala-wedding h-100">
                    <img src="https://images.unsplash.com/photo-1594736797933-d0401ba2fe65?w=400&h=250&fit=crop&auto=format&q=80" 
                         class="card-img-top" alt="Traditional Indian" style="height: 180px; object-fit: cover;">
                    <div class="card-body">
                        <h6 class="card-title">Traditional Indian</h6>
                        <p class="card-text small">Salwar kameez, churidars & ethnic wear</p>
                        <a href="{% url 'store:product_list' %}?category=traditional-indian-wear" class="btn btn-kerala btn-sm">
                            <i class="fas fa-star me-1"></i>Explore
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Fusion Fashion -->
            <div class="col-md-6 col-lg-3">
                <div class="category-card kerala-festive h-100">
                    <img src="https://images.unsplash.com/photo-1617038220319-276d3cfab638?w=400&h=250&fit=crop&auto=format&q=80" 
                         class="card-img-top" alt="Fusion Wear" style="height: 180px; object-fit: cover;">
                    <div class="card-body">
                        <h6 class="card-title">Fusion & Modern</h6>
                        <p class="card-text small">Contemporary styles with cultural touch</p>
                        <a href="{% url 'store:product_list' %}?category=fusion-and-contemporary" class="btn btn-kerala btn-sm">
                            <i class="fas fa-magic me-1"></i>Browse
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Party Wear -->
            <div class="col-md-6 col-lg-3">
                <div class="category-card kerala-bridal h-100">
                    <img src="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=400&h=250&fit=crop&auto=format&q=80" 
                         class="card-img-top" alt="Party Wear" style="height: 180px; object-fit: cover;">
                    <div class="card-body">
                        <h6 class="card-title">Party & Festive</h6>
                        <p class="card-text small">Glamorous outfits for celebrations</p>
                        <a href="{% url 'store:product_list' %}?category=party-and-festive-wear" class="btn btn-kerala btn-sm">
                            <i class="fas fa-cocktail me-1"></i>Shop
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center">
            <a href="{% url 'store:product_list' %}" class="cta-button cta-primary" style="
                background: linear-gradient(135deg, #ff6b9d, #c44569, #ffd700);
                padding: 1rem 2.5rem;
                border-radius: 50px;
                color: white;
                font-weight: 600;
                text-decoration: none;
                box-shadow: 0 8px 30px rgba(255, 107, 157, 0.3);
                transition: all 0.3s ease;
            ">
                <i class="fas fa-heart me-2"></i>Discover All Cultural Styles
            </a>
        </div>
    </div>
</section>

<style>
@keyframes culturalDance {
    0%, 100% { 
        transform: translateX(0) translateY(0) rotate(0deg);
        opacity: 0.6;
    }
    25% { 
        transform: translateX(20px) translateY(-15px) rotate(5deg);
        opacity: 0.8;
    }
    50% { 
        transform: translateX(-15px) translateY(-25px) rotate(-3deg);
        opacity: 0.7;
    }
    75% { 
        transform: translateX(-20px) translateY(15px) rotate(7deg);
        opacity: 0.9;
    }
}

.cultural-fashion-section .category-card {
    transform: translateY(0);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.cultural-fashion-section .category-card:hover {
    transform: translateY(-15px) scale(1.05);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
}
</style>

<!-- Newsletter Section -->
<section class="newsletter-section">
    <div class="container">
        <div class="newsletter-content">
            <h2>Stay in Style</h2>
            <p>Subscribe to our newsletter for exclusive offers, style tips, and early access to new collections</p>
            
            <form method="post" action="{% url 'store:newsletter_signup' %}" class="newsletter-form">
                {% csrf_token %}
                <input type="email" name="email" class="newsletter-input" placeholder="Enter your email address" required>
                <button type="submit" class="newsletter-btn">
                    Subscribe
                </button>
            </form>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add to cart functionality
    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            const productId = this.dataset.productId;
            
            if (!productId) {
                console.error('Product ID not found');
                return;
            }
            
            // Show loading state
            const originalContent = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
            this.disabled = true;
            
            // Add to cart
            fetch(`/add-to-cart/${productId}/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                    'X-Requested-With': 'XMLHttpRequest',
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'quantity=1'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Show success state
                    this.innerHTML = '<i class="fas fa-check"></i>';
                    this.style.background = 'var(--sage-green)';
                    
                    // Update cart badge if exists
                    const cartBadge = document.querySelector('.modern-badge');
                    if (cartBadge) {
                        cartBadge.textContent = data.cart_items_count;
                    }
                    
                    // Reset after 2 seconds
                    setTimeout(() => {
                        this.innerHTML = originalContent;
                        this.style.background = '';
                        this.disabled = false;
                    }, 2000);
                } else {
                    throw new Error('Failed to add to cart');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                // Show error state
                this.innerHTML = '<i class="fas fa-exclamation"></i>';
                this.style.background = '#dc3545';
                
                // Reset after 2 seconds
                setTimeout(() => {
                    this.innerHTML = originalContent;
                    this.style.background = '';
                    this.disabled = false;
                }, 2000);
            });
        });
    });
    
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});
</script>
{% endblock %}
